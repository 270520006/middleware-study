# 手写SPI

​	最近看了很多源码，例如Java SPI，Dubbo SPI等，光看源码手挺痒痒的，就想着自己造造轮子。这是我第一次造轮子，选择模仿的对象是Java SPI，原因有两个：

* 看完Dubbo SPI后，感觉Java SPI难度尚可，且流程我较为熟悉。
* Java SPI尝试手写完成后，我可以再试一试Dubbo SPI。

手写过程我会通过这个笔记记录下来，希望以后的自己可以看到（主要是记性不好）。

如果这篇文章有其他人看，也想知道这么写的，可以先看我先前的Java SPI运用和源码解析再来看这个。

## 整体流程

要仿着造轮子，肯定得对程序执行的一个流程有个清晰的了解，所以这里来讲下整个流程：

* 首先我们要先传入要实现的接口
  * 主要为了得到类加载器 
  * 判断加载的类是否实现了该接口
* 然后我们要读取配置文件（即META-INF/services/+接口全名，例如：META-INF/services/cn.zsp.spi.Car）
  * 应该有个写死的路径加上接口的全名，或者让用户自行提供（建议写死）
  * 先去除#号后的数据，然后去除前后空格，一行一行读取
  * 使用集合存储所有的生成类名
*  使用反射，通过先前传入的接口获取到的类加载器生成类
* 以配置文件名和对象为键值存入缓存，最后返回对象

至此，整个流程就讲完了，下面我开始实现，期间应该会比较生疏，望见谅。



## 开始手写

